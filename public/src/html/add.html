<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Add a habit</title>
		<link rel="stylesheet" href="../css/forms.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="../js/cropbox.js"></script>
	<style>
        

    </style>
	</head>
	<body>

		<div class="forms" id="habit-form">
			<h2>Add A Habit</h2>
			<form name="habitForm">
				<p><label><span id="title_text">Habit Title</span></label></p>
				<p><input id="title" type="text" name="fullname" placeholder="Exercise 30 minutes"></p>
				<p><label>Habit Icon</label></p>
				<img id="icon1" class="icon" onclick="selectImage('icon1');" src="../../img/sleep.jpg" alt="sleep image"/>
				<img id="icon2" class="icon" onclick="selectImage('icon2');" src="../../img/salad.jpg" alt="eat image"/>
				<img id="icon3" class="icon" onclick="selectImage('icon3');" src="../../img/run.jpg" alt="run image"/>
				<img id="icon4" class="icon" src="../../img/add.png" alt="find a image" onclick="chooseFile();"/>
				<!--<div style="height:0px;overflow:hidden">
				   <input type="file" id="profilePhotoFileUpload" name="fileInput" />
				</div>-->
				<p><label>Weekly Frequency</label></p>
				<div id="ck-button">
					<label> <input type="checkbox" name="date" value="sunday"><span>Sun</span></label>
					<label> <input type="checkbox" name="date" value="monday"><span>Mon</span></label>
					<label> <input type="checkbox" name="date" value="tuesday"><span>Tues</span></label>
					<label> <input type="checkbox" name="date" value="wednesday"><span>Wed</span></label>
					<label> <input type="checkbox" name="date" value="thursday"><span>Thur</span></label>
					<label> <input type="checkbox" name="date" value="friday"><span>Fri</span></label>
					<label> <input type="checkbox" name="date" value="saturday"><span>Sat</span></label>
				</div>


				<p><label>Daily Frequency</label></p>
				<div id="daily-button">
					<label> <input id="day1" type="checkbox" name="day" value="1"><span>1</span></label>
					<label> <input id="day2" type="checkbox" name="day" value="2"><span>2</span></label>
					<label> <input id="day3" type="checkbox" name="day" value="3"><span>3</span></label>
					<span id="times">times</span>
				</div>
				<p><label><span id="others_text">Others: </span><input id="others" type="text" name="day" placeholder="More than 3 times"></label></p>
				<p id="save_p"><input id="save" type="button" value="Save It" onclick="addHabit()"></p>

			</form>
		</div>
		
		<div class="container" id="upload-image">
		    <div class="imageBox">
		        <div class="thumbBox"></div>
		        <div class="spinner" style="display: none">Loading...</div>
		    </div>
		    <div class="action">
		        <input type="file" id="profilePhotoFileUpload" >
		        <input type="button" id="btnCrop" value="Save" >
		        <input type="button" id="btnZoomIn" value="+" >
		        <input type="button" id="btnZoomOut" value="-">
		        <button onclick="closeImageSelector()">Cancel</button>
		    </div>
		    <div class="cropped">
		    	<img id="cropped" src="" alt="image">
		    </div>
		</div>
		<script>
				   function chooseFile() {
				   		//document.getElementById("upload-image").style.display = "inline";
				   		document.getElementById("upload-image").style.visibility = "visible";
				   		document.getElementById("habit-form").style.opacity = "0.5";
				   }
				   function closeImageSelector() {
				   		document.getElementById("upload-image").style.visibility = "hidden";
				   		document.getElementById("habit-form").style.opacity = "1.0";
				   }
				   function saveImageSelector(image_data) {
				   		document.getElementById("upload-image").style.visibility = "hidden";
				   		document.getElementById("habit-form").style.opacity = "1.0";
				   		document.getElementById("icon4").src = image_data;
				   		selectImage('icon4');
				   }
		</script>
		<script type="text/javascript">
			var cropper;
		    window.onload = function() {
		        var options =
		        {
		            imageBox: '.imageBox',
		            thumbBox: '.thumbBox',
		            spinner: '.spinner',
		            imgSrc: '../../img/default.jpg'
		        }
		        cropper = new cropbox(options);
		        document.querySelector('#profilePhotoFileUpload').addEventListener('change', function(){
		            var reader = new FileReader();
		            reader.onload = function(e) {
		                options.imgSrc = e.target.result;
		                cropper = new cropbox(options);
		            }
		            reader.readAsDataURL(this.files[0]);
		            this.files = [];
		        })
		        document.querySelector('#btnCrop').addEventListener('click', function(){
		            var img = cropper.getDataURL();
		            document.getElementById("cropped").src = img;
		            document.getElementById("upload-image").style.visibility = "hidden";
				   	document.getElementById("habit-form").style.opacity = "1.0";
				   	saveImageSelector(img);
		        })
		    };
		</script>
		<script src="../../lib/parse-1.6.7.min.js"></script>
		<script src="../js/add.js"></script>
		<script>
			function selectImage(name) {
				//Clear all the other effects
				document.getElementById('icon1').style.border = "none";
				document.getElementById('icon2').style.border = "none";
				document.getElementById('icon3').style.border = "none";
				document.getElementById('icon4').style.border = "none";
				var image = document.getElementById(name);
				image.style.border = "5px solid #42A5F5";
			}
		</script>

	</body>
</html>
