function chooseFile(){document.getElementById("upload-image").style.visibility="visible",document.getElementById("habit-form").style.opacity="0.5"}function closeImageSelector(){document.getElementById("upload-image").style.visibility="hidden",document.getElementById("habit-form").style.opacity="1.0"}function saveImageSelector(e){document.getElementById("upload-image").style.visibility="hidden",document.getElementById("habit-form").style.opacity="1.0",document.getElementById("icon4").src=e,selectImage("icon4")}function daily_selection(e){document.getElementById("day1").checked=!1,document.getElementById("day2").checked=!1,document.getElementById("day3").checked=!1,document.getElementById(e).checked=!0,document.getElementById("others").value=""}function selectImage(e){document.getElementById("icon1").style.border="none",document.getElementById("icon2").style.border="none",document.getElementById("icon3").style.border="none",document.getElementById("icon4").style.border="none";var t=document.getElementById(e);t.style.border="5px solid #42A5F5","icon1"==e?document.getElementById("cropped").src="../../img/sleep.jpg":"icon2"==e?document.getElementById("cropped").src="../../img/salad.jpg":"icon3"==e&&(document.getElementById("cropped").src="../../img/run.jpg")}function error_checking(){var e=document.forms.habitForm.fullname.value,t=0,n=document.getElementById("cropped").src,o=0,r="";return $("#ck-button :checked").each(function(){r=r+$(this).val()+" "}),$("#daily-button :checked").each(function(){o=parseInt($(this).val())}),""==e?(t=1,$("#title_error").css("display","inline-block")):$("#title_error").css("display","none"),"default.jpg"==n.substr(n.length-11)?(t=1,$("#habit_icon_error").css("display","inline-block")):$("#habit_icon_error").css("display","none"),""==r?(t=1,$("#weekly_frequency_error").css("display","inline-block")):$("#weekly_frequency_error").css("display","none"),0==o?($("#daily_frequency_error").css("display","none"),document.getElementById("others").value>0?o=document.getElementById("others").value:(t=1,$("#daily_frequency_error").css("display","inline-block"))):$("#daily_frequency_error").css("display","none"),t}function addHabit(){if(0==error_checking()){var e=Parse.Object.extend("Habit"),t=new e,n=document.getElementById("cropped").src,o=new Parse.File;if("file"==n.substring(0,4)||"http"==n.substring(0,4)){var r=n.substr(n.length-5);if("p.jpg"==r){var c=Parse.Object.extend("Image"),a=new Parse.Query(c);a.equalTo("name","sleep"),a.find({success:function(e){for(var n=0;n<e.length;n++){o=e[n].get("Image");var r=0,c=0,a=document.forms.habitForm.fullname.value,l="";$("#ck-button :checked").each(function(){l=l+$(this).val()+" "});var d=0;$("#daily-button :checked").each(function(){d=parseInt($(this).val())}),document.getElementById("others").value&&(d=parseInt(document.getElementById("others").value)),t.save({current_value:r,daily_frequency:d,daily_current:0,icon_image:o,max_value:c,title:a,user_id:Parse.User.current(),weekly_frequency:l},{success:function(e){console.log("Successfully logged in!"),$("#modal_save_data").modal("show")},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}else if("d.jpg"==r){var c=Parse.Object.extend("Image"),a=new Parse.Query(c);a.equalTo("name","salad"),a.find({success:function(e){for(var n=0;n<e.length;n++){o=e[n].get("Image");var r=0,c=0,a=document.forms.habitForm.fullname.value,l="";$("#ck-button :checked").each(function(){l=l+$(this).val()+" "});var d=0;$("#daily-button :checked").each(function(){d=parseInt($(this).val())}),document.getElementById("others").value&&(d=parseInt(document.getElementById("others").value)),t.save({current_value:r,daily_frequency:d,daily_current:0,icon_image:o,max_value:c,title:a,user_id:Parse.User.current(),weekly_frequency:l},{success:function(e){console.log("Successfully logged in!"),$("#modal_save_data").modal("show")},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}else if("n.jpg"==r){var c=Parse.Object.extend("Image"),a=new Parse.Query(c);a.equalTo("name","run"),a.find({success:function(e){for(var n=0;n<e.length;n++){o=e[n].get("Image");var r=0,c=0,a=document.forms.habitForm.fullname.value,l="";$("#ck-button :checked").each(function(){l=l+$(this).val()+" "});var d=0;$("#daily-button :checked").each(function(){d=parseInt($(this).val())}),document.getElementById("others").value&&(d=parseInt(document.getElementById("others").value)),t.save({current_value:r,daily_frequency:d,daily_current:0,icon_image:o,max_value:c,title:a,user_id:Parse.User.current(),weekly_frequency:l},{success:function(e){console.log("Successfully logged in!"),$("#modal_save_data").modal("show")},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}}else{var l=n.split("base64,")[1],d=($("#profilePhotoFileUpload")[0],document.getElementById("profilePhotoFileUpload").value.split(/(\\|\/)/g).pop());o=new Parse.File(d,{base64:l});var i=0,s=0,u=document.forms.habitForm.fullname.value,m="";$("#ck-button :checked").each(function(){m=m+$(this).val()+" "});var y=0;$("#daily-button :checked").each(function(){y=parseInt($(this).val())}),document.getElementById("others").value&&(y=parseInt(document.getElementById("others").value)),t.save({current_value:i,daily_frequency:y,daily_current:0,icon_image:o,max_value:s,title:u,user_id:Parse.User.current(),weekly_frequency:m},{success:function(e){console.log("Successfully logged in!"),$("#modal_save_data").modal("show")},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})}}}$(document).ready(function(){Parse.initialize("ULppY5RxxZUo8yekihZdVH3uHLm24j5Q6298Un4O","mDAyhkdhlv6qH9lT9WFzMCeML6ycMa1S8oWlybVG"),null!=Parse.User.current()&&Parse.User.current().authenticated()||(window.location.href="login.html")}),$("#others").on("input",function(e){document.getElementById("day1").checked=!1,document.getElementById("day2").checked=!1,document.getElementById("day3").checked=!1});var cropper;window.onload=function(){var e={imageBox:".imageBox",thumbBox:".thumbBox",spinner:".spinner",imgSrc:"../../img/default.jpg"};cropper=new cropbox(e),document.querySelector("#profilePhotoFileUpload").addEventListener("change",function(){var t=new FileReader;t.onload=function(t){e.imgSrc=t.target.result,cropper=new cropbox(e)},t.readAsDataURL(this.files[0]),this.files=[]}),document.querySelector("#btnCrop").addEventListener("click",function(){var e=cropper.getDataURL();document.getElementById("cropped").src=e,document.getElementById("upload-image").style.visibility="hidden",document.getElementById("habit-form").style.opacity="1.0",saveImageSelector(e)}),document.querySelector("#btnZoomIn").addEventListener("click",function(){cropper.zoomIn()}),document.querySelector("#btnZoomOut").addEventListener("click",function(){cropper.zoomOut()})};