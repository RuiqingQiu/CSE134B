function chooseFile(){document.getElementById("upload-image").style.visibility="visible",document.getElementById("habit-form").style.opacity="0.5"}function closeImageSelector(){document.getElementById("upload-image").style.visibility="hidden",document.getElementById("habit-form").style.opacity="1.0"}function saveImageSelector(e){document.getElementById("upload-image").style.visibility="hidden",document.getElementById("habit-form").style.opacity="1.0",document.getElementById("icon4").src=e,selectImage("icon4")}function daily_selection(e){document.getElementById("day1").checked=!1,document.getElementById("day2").checked=!1,document.getElementById("day3").checked=!1,document.getElementById(e).checked=!0,document.getElementById("others").value=""}function selectImage(e){document.getElementById("icon1").style.border="none",document.getElementById("icon2").style.border="none",document.getElementById("icon3").style.border="none",document.getElementById("icon4").style.border="none";var t=document.getElementById(e);t.style.border="5px solid #42A5F5","icon1"==e?document.getElementById("cropped").src="../../img/sleep.jpg":"icon2"==e?document.getElementById("cropped").src="../../img/salad.jpg":"icon3"==e&&(document.getElementById("cropped").src="../../img/run.jpg")}function error_checking(){var e=document.forms.habitForm.fullname.value,t=0,n=document.getElementById("cropped").src,c=0,o="";return $("#ck-button :checked").each(function(){o=o+$(this).val()+" "}),$("#daily-button :checked").each(function(){c=parseInt($(this).val())}),""==e?(t=1,$("#title_error").css("display","inline-block")):$("#title_error").css("display","none"),"default.jpg"==n.substr(n.length-11)?(t=1,$("#habit_icon_error").css("display","inline-block")):$("#habit_icon_error").css("display","none"),""==o?(t=1,$("#weekly_frequency_error").css("display","inline-block")):$("#weekly_frequency_error").css("display","none"),0==c?($("#daily_frequency_error").css("display","none"),document.getElementById("others").value>0?c=document.getElementById("others").value:(t=1,$("#daily_frequency_error").css("display","inline-block"))):$("#daily_frequency_error").css("display","none"),t}function addHabit(){if(0==error_checking()){var e=Parse.Object.extend("Habit"),t=new e,n=document.getElementById("cropped").src,c=new Parse.File;if("file"==n.substring(0,4)||"http"==n.substring(0,4)||"chrome-extension"==n.substring(0,16)){var o=n.substr(n.length-5);if("p.jpg"==o){var r=Parse.Object.extend("Image"),a=new Parse.Query(r);a.equalTo("name","sleep"),a.find({success:function(e){for(var n=0;n<e.length;n++){c=e[n].get("Image");var o=0,r=0,a=document.forms.habitForm.fullname.value,l="";$("#ck-button :checked").each(function(){l=l+$(this).val()+" "});var i=0;$("#daily-button :checked").each(function(){i=parseInt($(this).val())}),document.getElementById("others").value&&(i=parseInt(document.getElementById("others").value)),t.save({current_value:o,daily_frequency:i,daily_current:0,icon_image:c,max_value:r,title:a,user_id:Parse.User.current(),weekly_frequency:l},{success:function(e){console.log("Successfully logged in!"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Adding Habit"};Parse.Analytics.track("addHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}else if("d.jpg"==o){var r=Parse.Object.extend("Image"),a=new Parse.Query(r);a.equalTo("name","salad"),a.find({success:function(e){for(var n=0;n<e.length;n++){c=e[n].get("Image");var o=0,r=0,a=document.forms.habitForm.fullname.value,l="";$("#ck-button :checked").each(function(){l=l+$(this).val()+" "});var i=0;$("#daily-button :checked").each(function(){i=parseInt($(this).val())}),document.getElementById("others").value&&(i=parseInt(document.getElementById("others").value)),t.save({current_value:o,daily_frequency:i,daily_current:0,icon_image:c,max_value:r,title:a,user_id:Parse.User.current(),weekly_frequency:l},{success:function(e){console.log("Successfully logged in!"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Adding Habit"};Parse.Analytics.track("addHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}else if("n.jpg"==o){var r=Parse.Object.extend("Image"),a=new Parse.Query(r);a.equalTo("name","run"),a.find({success:function(e){for(var n=0;n<e.length;n++){c=e[n].get("Image");var o=0,r=0,a=document.forms.habitForm.fullname.value,l="";$("#ck-button :checked").each(function(){l=l+$(this).val()+" "});var i=0;$("#daily-button :checked").each(function(){i=parseInt($(this).val())}),document.getElementById("others").value&&(i=parseInt(document.getElementById("others").value)),t.save({current_value:o,daily_frequency:i,daily_current:0,icon_image:c,max_value:r,title:a,user_id:Parse.User.current(),weekly_frequency:l},{success:function(e){console.log("Successfully logged in!"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Adding Habit"};Parse.Analytics.track("addHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}}else{var l=n.split("base64,")[1],i=($("#profilePhotoFileUpload")[0],document.getElementById("profilePhotoFileUpload").value.split(/(\\|\/)/g).pop());c=new Parse.File(i,{base64:l});var d=0,s=0,u=document.forms.habitForm.fullname.value,m="";$("#ck-button :checked").each(function(){m=m+$(this).val()+" "});var y=0;$("#daily-button :checked").each(function(){y=parseInt($(this).val())}),document.getElementById("others").value&&(y=parseInt(document.getElementById("others").value)),t.save({current_value:d,daily_frequency:y,daily_current:0,icon_image:c,max_value:s,title:u,user_id:Parse.User.current(),weekly_frequency:m},{success:function(e){console.log("Successfully logged in!"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Adding Habit"};Parse.Analytics.track("addHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})}}}$(document).ready(function(){Parse.initialize("ULppY5RxxZUo8yekihZdVH3uHLm24j5Q6298Un4O","mDAyhkdhlv6qH9lT9WFzMCeML6ycMa1S8oWlybVG"),null!=Parse.User.current()&&Parse.User.current().authenticated()||(window.location.href="login.html"),$("#icon1").click(function(){selectImage("icon1")}),$("#icon2").click(function(){selectImage("icon2")}),$("#icon3").click(function(){selectImage("icon3")}),$("#icon4").click(chooseFile),$("#day1").click(function(){daily_selection("day1")}),$("#day2").click(function(){daily_selection("day2")}),$("#day3").click(function(){daily_selection("day3")}),$("#save").click(addHabit),$("#btnCancel").click(closeImageSelector),$("#okayButton").click(function(){location.href="../html/list.html"}),$("#cancelButton").click(function(){location.href="../html/list.html"}),$("#logoutButton").click(Logout),$("#others").on("input",function(e){document.getElementById("day1").checked=!1,document.getElementById("day2").checked=!1,document.getElementById("day3").checked=!1})}),$("#others").on("input",function(e){document.getElementById("day1").checked=!1,document.getElementById("day2").checked=!1,document.getElementById("day3").checked=!1});var cropper;window.onload=function(){var e={imageBox:".imageBox",thumbBox:".thumbBox",spinner:".spinner",imgSrc:"../../img/default.jpg"};cropper=new cropbox(e),document.querySelector("#profilePhotoFileUpload").addEventListener("change",function(){var t=new FileReader;t.onload=function(t){e.imgSrc=t.target.result,cropper=new cropbox(e)},t.readAsDataURL(this.files[0]),this.files=[]}),document.querySelector("#btnCrop").addEventListener("click",function(){var e=cropper.getDataURL();document.getElementById("cropped").src=e,document.getElementById("upload-image").style.visibility="hidden",document.getElementById("habit-form").style.opacity="1.0",saveImageSelector(e)}),document.querySelector("#btnZoomIn").addEventListener("click",function(){cropper.zoomIn()}),document.querySelector("#btnZoomOut").addEventListener("click",function(){cropper.zoomOut()})};