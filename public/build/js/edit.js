function getHabit(){var e=Parse.Object.extend("Habit"),t=new Parse.Query(e);t.equalTo("objectId",QueryString.objectID),t.find({success:function(e){var t=e[0];document.forms.habitForm.fullname.value=t.get("title"),document.getElementById("icon4").src=t.get("icon_image")._url,document.getElementById("cropped").src=t.get("icon_image")._url,document.getElementById("cropped").alt=t.get("icon_image")._name,selectImage("icon4");var n=t.get("weekly_frequency");console.log(n),weekly_array=n.split(" "),console.log(weekly_array);for(var r=0;r<weekly_array.length-1;r++)document.getElementById(weekly_array[r]).checked=!0;var c=t.get("daily_frequency");console.log(c),3>=c?document.getElementById("day"+c).checked=!0:document.getElementById("others").value=c},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})}function saveEditedHabit(){if(0==error_checking()){var e=Parse.Object.extend("Habit"),t=new e,n=document.getElementById("cropped").src,r=new Parse.File;if("file"==n.substring(0,4)||"http"==n.substring(0,4)){var c=n.substr(n.length-5);if("p.jpg"==c){var a=Parse.Object.extend("Image"),o=new Parse.Query(a);o.equalTo("name","sleep"),o.find({success:function(e){for(var t=0;t<e.length;t++){r=e[t].get("Image");var n=Parse.Object.extend("Habit"),c=new Parse.Query(n);c.equalTo("objectId",QueryString.objectID),c.get(QueryString.objectID,{success:function(e){var t=document.forms.habitForm.fullname.value,n="";$("#ck-button :checked").each(function(){n=n+$(this).val()+" "});var c=0;$("#daily-button :checked").each(function(){c=parseInt($(this).val())}),document.getElementById("others").value&&(c=parseInt(document.getElementById("others").value)),e.set("daily_frequency",c),e.set("title",t),e.set("weekly_frequency",n),e.set("icon_image",r),e.save({success:function(e){console.log("successfully saved"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Editing Habit"};Parse.Analytics.track("editHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}else if("d.jpg"==c){var a=Parse.Object.extend("Image"),o=new Parse.Query(a);o.equalTo("name","salad"),o.find({success:function(e){for(var t=0;t<e.length;t++){r=e[t].get("Image");var n=Parse.Object.extend("Habit"),c=new Parse.Query(n);c.equalTo("objectId",QueryString.objectID),c.get(QueryString.objectID,{success:function(e){var t=document.forms.habitForm.fullname.value,n="";$("#ck-button :checked").each(function(){n=n+$(this).val()+" "});var c=0;$("#daily-button :checked").each(function(){c=parseInt($(this).val())}),document.getElementById("others").value&&(c=parseInt(document.getElementById("others").value)),e.set("daily_frequency",c),e.set("title",t),e.set("weekly_frequency",n),e.set("icon_image",r),e.save({success:function(e){console.log("successfully saved"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Editing Habit"};Parse.Analytics.track("editHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}else if("n.jpg"==c){var a=Parse.Object.extend("Image"),o=new Parse.Query(a);o.equalTo("name","run"),o.find({success:function(e){for(var t=0;t<e.length;t++){r=e[t].get("Image");var n=Parse.Object.extend("Habit"),c=new Parse.Query(n);c.equalTo("objectId",QueryString.objectID),c.get(QueryString.objectID,{success:function(e){var t=document.forms.habitForm.fullname.value,n="";$("#ck-button :checked").each(function(){n=n+$(this).val()+" "});var c=0;$("#daily-button :checked").each(function(){c=parseInt($(this).val())}),document.getElementById("others").value&&(c=parseInt(document.getElementById("others").value)),e.set("daily_frequency",c),e.set("title",t),e.set("weekly_frequency",n),e.set("icon_image",r),e.save({success:function(e){console.log("successfully saved"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Editing Habit"};Parse.Analytics.track("editHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})},error:function(e,t){alert("Error: "+t.code+" "+t.message)}});break}},error:function(e){alert("Error: "+e.code+" "+e.message)}})}else{var t=Parse.Object.extend("Habit"),o=new Parse.Query(t);o.equalTo("objectId",QueryString.objectID),o.get(QueryString.objectID,{success:function(e){console.log("find object");var t=document.forms.habitForm.fullname.value,n="";$("#ck-button :checked").each(function(){n=n+$(this).val()+" "});var c=0;$("#daily-button :checked").each(function(){c=parseInt($(this).val())}),document.getElementById("others").value&&(c=parseInt(document.getElementById("others").value)),e.set("daily_frequency",c),e.set("title",t),e.set("weekly_frequency",n),e.set("icon_image",r),e.save({success:function(e){console.log("successfully saved"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Editing Habit"};Parse.Analytics.track("editHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})}}else{console.log("enter here");var s=n.split("base64,")[1],i=($("#profilePhotoFileUpload")[0],document.getElementById("profilePhotoFileUpload").value.split(/(\\|\/)/g).pop());r=new Parse.File(i,{base64:s});var t=Parse.Object.extend("Habit"),o=new Parse.Query(t);o.equalTo("objectId",QueryString.objectID),o.get(QueryString.objectID,{success:function(e){console.log("find object");var t=document.forms.habitForm.fullname.value,n="";$("#ck-button :checked").each(function(){n=n+$(this).val()+" "});var c=0;$("#daily-button :checked").each(function(){c=parseInt($(this).val())}),document.getElementById("others").value&&(c=parseInt(document.getElementById("others").value)),e.set("daily_frequency",c),e.set("title",t),e.set("weekly_frequency",n),e.set("icon_image",r),e.save({success:function(e){console.log("successfully saved"),$("#modal_save_data").modal("show");var t={user_id:Parse.User.current().id,title:e.get("title"),type:"Editing Habit"};Parse.Analytics.track("editHabit",t)},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})}}}var QueryString=function(){for(var e={},t=window.location.search.substring(1),n=t.split("&"),r=0;r<n.length;r++){var c=n[r].split("=");if("undefined"==typeof e[c[0]])e[c[0]]=decodeURIComponent(c[1]);else if("string"==typeof e[c[0]]){var a=[e[c[0]],decodeURIComponent(c[1])];e[c[0]]=a}else e[c[0]].push(decodeURIComponent(c[1]))}return e}();$(document).ready(function(){Parse.initialize("ULppY5RxxZUo8yekihZdVH3uHLm24j5Q6298Un4O","mDAyhkdhlv6qH9lT9WFzMCeML6ycMa1S8oWlybVG"),null==Parse.User.current()||null==Parse.User.current().authenticated()?window.location.href="login.html":getHabit(),$("#others").on("input",function(e){document.getElementById("day1").checked=!1,document.getElementById("day2").checked=!1,document.getElementById("day3").checked=!1}),$("#icon1").click(function(){selectImage("icon1")}),$("#icon2").click(function(){selectImage("icon2")}),$("#icon3").click(function(){selectImage("icon3")}),$("#icon4").click(chooseFile),$("#day1").click(function(){daily_selection("day1")}),$("#day2").click(function(){daily_selection("day2")}),$("#day3").click(function(){daily_selection("day3")}),$("#save").click(saveEditedHabit),$("#btnCancel").click(closeImageSelector),$("#okayButton").click(function(){location.href="../html/list.html"}),$("#discardButton").click(function(){location.href="../html/list.html"}),$("#cancelButton").click(function(){location.href="../html/list.html"}),$("#logoutButton").click(Logout)});