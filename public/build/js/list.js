function deleteHabit(e){var t=Parse.Object.extend("Habit"),r=new Parse.Query(t);r.get(e,{success:function(e){e.destroy({success:function(e){location.reload()},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})}function listHabits(){var e=Parse.Object.extend("Habit"),t=new Parse.Query(e),r=Parse.User.current();t.equalTo("user_id",r),t.find({success:function(e){for(var t=0;t<e.length;t++){var r={};r.id=e[t].id,r.title=e[t].get("title"),r.icon_image=e[t].get("icon_image"),r.daily_current=e[t].get("daily_current"),r.daily_frequency=e[t].get("daily_frequency"),r.current_value=e[t].get("current_value"),r.max_value=e[t].get("max_value"),r.max_value>0?r.progress=r.current_value/r.max_value*CONST.PROGRESS_BAR_LENGTH:r.progress=0,HABIT.jsonArray[t]=r}console.log(HABIT.jsonArray),renderHBTemplate($("#list-template"),HABIT.jsonArray,$("#habit-list")),$(".habit-entry .edit").click(function(e){e.preventDefault();var t=$(this).closest(".habit-entry").attr("id");editHabit(t)}),$(".habit-entry .del").click(function(e){e.preventDefault();var t=$(this).closest(".habit-entry");$("#deleteConfirmation em").text($(t).find(".habit-name").text());var r=$(t).attr("id");$("#deleteConfirmation .btn-delete").click(function(e){e.preventDefault(),deleteHabit(r)})}),$(".habit-entry .op-done").click(function(e){e.preventDefault();var t=$(this).closest(".habit-entry");doHabit($(t))}),$(".habit-entry .op-dismiss").click(function(e){e.preventDefault();$(this).closest(".habit-entry")})},error:function(e){alert("Error: "+e.code+" "+e.message)}})}function doHabit(e){var t=Parse.Object.extend("Habit"),r=new Parse.Query(t);r.get($(e).attr("id"),{success:function(t){var r=t.get("daily_current");r<t.get("daily_frequency")&&(t.set("daily_current",++r),t.save({success:function(t){var a=$(e).find(".message-today");a.children(".daily-current").text(r),a.css("visibility","visible")},error:function(e,t){alert("Error: "+t.code+" "+t.message)}}))},error:function(e,t){alert("Error: "+t.code+" "+t.message)}})}function dismissHabit(){}function editHabit(e){location.href="edit.html?objectID="+e}function renderHBTemplate(e,t,r){var a=Handlebars.compile($(e).html());$(r).append(a(t))}var CONST={};CONST.PROGRESS_BAR_LENGTH=150;var HABIT={};HABIT.jsonArray=[],$(document).ready(function(){Parse.initialize("ULppY5RxxZUo8yekihZdVH3uHLm24j5Q6298Un4O","mDAyhkdhlv6qH9lT9WFzMCeML6ycMa1S8oWlybVG"),(null==Parse.User.current()||null==Parse.User.current().authenticated())&&(window.location.href="login.html"),listHabits()});